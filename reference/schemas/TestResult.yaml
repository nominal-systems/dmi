TestResult:
  title: TestResult
  description: |
    A group of clinical observations that belong to a test suite or panel.
  type: object
  properties:
    code:
      type: string
      description: The test code
      required: true
      example: HEM
    name:
      type: string
      description: The test name
      required: true
      example: Hematology
    status:
      type: string
      description: |
        The status of the test result.
        
        `PENDING` means the test result is being processed, not all required observations are present or in a final state.
        
        `DONE` means the test result has been fully processed and ready to be interpreted clinically.
        
        `CANCELLED` means the test result was cancelled and shouldn't be interpreted clinically.
      required: true
      enum:
        - PENDING
        - DONE
        - CANCELLED
      example: DONE
    notes:
      type: string
      description: Notes about the test
      example: Patient has a history of cancer
    observations:
      type: array
      description: |
        The array of clinical observations for the test result.
      items:
        $ref: './Observation.yaml'
      example:
        name: Hemoglobin
        code: HEM
        status: DONE
        valueQuantity:
          value: 10.0
          unit: g/dL
        interpretation: Normal
        referenceRange:
          - type: NORMAL
            text: Normal
            low: 5.0
            high: 20.0
          - type: CRITICAL
            text: Critical
            low: 0.0
            high: 5.0
        device: 9M9051
        notes: Measurement was performed in a non-sterile environment
