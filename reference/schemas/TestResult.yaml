TestResult:
  title: TestResult
  description: |
    A test result that can contain one or more clinical observations.
  type: object
  properties:
    code:
      type: string
      description: The test code
      required: true
      example: HEM
    name:
      type: string
      description: The test name
      required: true
      example: Hematology
    status:
      type: string
      description: |
        The status of the test result.
        
        `PENDING` means the test result is being processed, not all observations will be present.
        
        `DONE` means the test result has been processed and ready to be interpreted clinically.
        
        `CANCELLED` means the test result was cancelled and shouldn't be interpreted clinically.
      required: true
      enum:
        - PENDING
        - DONE
        - CANCELLED
      example: DONE
    device:
      type: string
      description: |
        ID of the device used to generate the observation data.
      example: 9M9051
    notes:
      type: string
      description: Notes about the test
      example: Patient has a history of cancer
    results:
      type: array
      description: |
        The array of observed analytes for the requested test code.
      items:
        $ref: './TestResultItem.yaml#/TestResultItem'
      example:
        name: Hemoglobin
        code: HEM
        status: DONE
        valueQuantity:
          value: 10.0
          unit: g/dL
        interpretation: Normal
        referenceRange:
          - type: NORMAL
            text: Normal
            low: 5.0
            high: 20.0
          - type: CRITICAL
            text: Critical
            low: 0.0
            high: 5.0
        notes: Measurement was performed in a non-sterile environment
